function amountChange(executionContext) {
    var formContext = executionContext.getFormContext();
    var amount = formContext.getAttribute("nf1pbm_certificatetransactionamount").getValue();
    var affiliateBalanceAmount = formContext.getAttribute("nf1pbm_affiliatebalanceamount").getValue();
    var optionSetField = formContext.getAttribute("nf1pbm_amountto");
    var certificateBalanceAmount = formContext.getAttribute("nf1pbm_certificatebalance").getValue();
    var minBalance = 1000; // Define the minimum balance requirement here
    var totalAmount = affiliateBalanceAmount + certificateBalanceAmount;

    if (optionSetField && amount != null) {
        var optionSetValue = optionSetField.getValue();

        if (optionSetValue === 582860000) { // Add to Cert
            var transAmount = amount - certificateBalanceAmount;
            var balCheck = certificateBalanceAmount + transAmount;

            if (balCheck > totalAmount || balCheck < minBalance) {
                showFormNotification(formContext, "Certificate renewal does not meet the minimum funds requirement.", "WARNING", "minBalanceNotification");
            } else {
                formContext.ui.clearFormNotification("minBalanceNotification");
            }
        } 
        else if (optionSetValue === 582860001) { // Withdraw from Cert
            var transAmount = certificateBalanceAmount - amount;
            var balCheck = certificateBalanceAmount - transAmount;

            if (balCheck < minBalance) {
                showFormNotification(formContext, "Certificate renewal does not meet the minimum funds requirement.", "WARNING", "minBalanceNotification");
            } else {
                formContext.ui.clearFormNotification("minBalanceNotification");
            }
        } 
        else if (optionSetValue === 582860002) { // Specific Balance
            if (amount >= certificateBalanceAmount) { // Add to Cert case
                var transAmount = amount - certificateBalanceAmount;
                var balCheck = certificateBalanceAmount + transAmount;

                if (balCheck > totalAmount || balCheck < minBalance) {
                    showFormNotification(formContext, "Certificate renewal does not meet the minimum funds requirement.", "WARNING", "minBalanceNotification");
                } else {
                    formContext.ui.clearFormNotification("minBalanceNotification");
                }
            } 
            else { // Withdraw from Cert case (amount < certificateBalanceAmount)
                var transAmount = certificateBalanceAmount - amount;
                var balCheck = certificateBalanceAmount - transAmount;

                if (balCheck < minBalance) {
                    showFormNotification(formContext, "Certificate renewal does not meet the minimum funds requirement.", "WARNING", "minBalanceNotification");
                } else {
                    formContext.ui.clearFormNotification("minBalanceNotification");
                }
            }
        }
    }
}

// Helper function to show form notifications
function showFormNotification(formContext, message, level, notificationId) {
    formContext.ui.setFormNotification(message, level, notificationId);
}
