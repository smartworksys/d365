function setCustomUserLookupOnLoad(executionContext) {
    var formContext = executionContext.getFormContext();

    // Replace with the schema name of your custom user lookup field
    var customUserLookupField = "new_customuserlookup";

    // Get the Owner field value
    var ownerValue = formContext.getAttribute("ownerid").getValue();

    if (ownerValue && ownerValue.length > 0) {
        // Get the details of the owner
        var ownerId = ownerValue[0].id;
        var ownerName = ownerValue[0].name;
        var ownerEntityType = ownerValue[0].entityType;

        // Set the custom user lookup field with the owner details
        var lookupValue = [{
            id: ownerId,
            name: ownerName,
            entityType: ownerEntityType
        }];

        formContext.getAttribute(customUserLookupField).setValue(lookupValue);
    } else {
        // Clear the custom user lookup field if no owner is set
        formContext.getAttribute(customUserLookupField).setValue(null);
    }
}


function setUserLookupOnLoad(executionContext) {
    var globalContext = Xrm.Utility.getGlobalContext();
    var userId = globalContext.userSettings.userId; // Get the current user's GUID
    var userName = globalContext.userSettings.userName; // Get the current user's name

    // Remove the curly braces from the userId
    userId = userId.replace(/[{}]/g, "");

    console.log("Current User GUID: " + userId);
    console.log("Current User Name: " + userName);

    // Construct the lookup value
    var lookupValue = [{
        id: userId,
        name: userName,
        entityType: "systemuser" // Entity type for users
    }];

    // Set the lookup value on the form
    var formContext = executionContext.getFormContext();
    var lookupFieldName = "new_customuserlookup"; // Replace with your lookup field schema name
    formContext.getAttribute(lookupFieldName).setValue(lookupValue);
}
