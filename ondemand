function amountChange(executionContext) {
    var formContext = executionContext.getFormContext();
    var amount = formContext.getAttribute("nf1pbm_certificatetransactionamount").getValue();
    var affiliateBalanceAmount = formContext.getAttribute("nf1pbm_affiliatebalanceamount").getValue();
    var optionSetField = formContext.getAttribute("nf1pbm_amountto");
    var certificateBalanceAmount = formContext.getAttribute("nf1pbm_certificatebalance").getValue();
    var minBalance = 1000; // Define the minimum balance requirement here or fetch it dynamically if needed

    if (optionSetField && amount != null) {
        var optionSetValue = optionSetField.getValue();

        if (optionSetValue === 582860000) { // Add to Cert
            var balCheck = affiliateBalanceAmount - amount;
            var certCheck = certificateBalanceAmount + amount;
            
            if (balCheck < minBalance || certCheck < minBalance) {
                showFormNotification(executionContext, "Certificate renewal does not meet the minimum funds requirement.", "WARNING", "minBalanceNotification");
            } else {
                formContext.ui.clearFormNotification("minBalanceNotification");
            }
        } 
        else if (optionSetValue === 582860001) { // Withdraw from Cert
            var certWithdrawCheck = certificateBalanceAmount - amount;
            
            if (certWithdrawCheck < minBalance) {
                showFormNotification(executionContext, "Certificate renewal does not meet the minimum funds requirement.", "WARNING", "minBalanceNotification");
            } else {
                formContext.ui.clearFormNotification("minBalanceNotification");
            }
        } 
        else if (optionSetValue === 582860002) { // Specific Balance
            var specificBalCheck = certificateBalanceAmount - amount;

            if (specificBalCheck > 0) { // Indicates Withdraw from Cert
                if (specificBalCheck < minBalance) {
                    showFormNotification(executionContext, "Certificate renewal does not meet the minimum funds requirement.", "WARNING", "minBalanceNotification");
                } else {
                    formContext.ui.clearFormNotification("minBalanceNotification");
                }
            } else { // Indicates Add to Cert
                var affiliateCheck = affiliateBalanceAmount - amount;
                var certAddCheck = certificateBalanceAmount + amount;

                if (affiliateCheck < minBalance || certAddCheck < minBalance) {
                    showFormNotification(executionContext, "Certificate renewal does not meet the minimum funds requirement.", "WARNING", "minBalanceNotification");
                } else {
                    formContext.ui.clearFormNotification("minBalanceNotification");
                }
            }
        }
    }
}

function showFormNotification(executionContext, message, level, notificationId) {
    var formContext = executionContext.getFormContext();
    formContext.ui.setFormNotification(message, level, notificationId);
}
