function amountChange(executionContext) {
    var formContext = executionContext.getFormContext();
    var amount = formContext.getAttribute(CONSTANTS.ATTRIBUTE_NAMES.TRANSACTION_AMOUNT).getValue();
    var affiliateBalanceAmount = formContext.getAttribute(CONSTANTS.ATTRIBUTE_NAMES.AFFILIATE_BALANCE_AMOUNT).getValue();
    var certificateBalanceAmount = formContext.getAttribute("nf1pbm_certificatebalance").getValue();
    var optionSetField = formContext.getAttribute("nf1pbm_amountto");
    var minBalance = CONSTANTS.MIN_BALANCE;
    var totalAmount = affiliateBalanceAmount + certificateBalanceAmount;

    if (optionSetField && amount !== null) {
        var optionSetValue = optionSetField.getValue();

        if (optionSetValue === CONSTANTS.OPTION_SET_VALUES.ADD_TO_CERT) { 
            // Add to Cert
            var newCertificateBalance = certificateBalanceAmount + amount;

            if (newCertificateBalance > totalAmount || newCertificateBalance < minBalance) {
                showFormNotification(formContext, CONSTANTS.MESSAGES.MINIMUM_FUNDS_WARNING, "WARNING", "minBalanceNotification");
            } else {
                formContext.ui.clearFormNotification("minBalanceNotification");
            }
        } else if (optionSetValue === CONSTANTS.OPTION_SET_VALUES.WITHDRAW_FROM_CERT) { 
            // Withdraw from Cert
            var remainingCertificateBalance = certificateBalanceAmount - amount;

            if (remainingCertificateBalance < minBalance) {
                showFormNotification(formContext, CONSTANTS.MESSAGES.MINIMUM_FUNDS_WARNING, "WARNING", "minBalanceNotification");
            } else {
                formContext.ui.clearFormNotification("minBalanceNotification");
            }
        } else if (optionSetValue === CONSTANTS.OPTION_SET_VALUES.SPECIFIC_BALANCE) { 
            // Specific Balance
            var specificBalCheck = certificateBalanceAmount - amount;
            
            if (specificBalCheck > 0) { 
                // Withdraw from Cert case
                if (specificBalCheck < minBalance) {
                    showFormNotification(formContext, CONSTANTS.MESSAGES.MINIMUM_FUNDS_WARNING, "WARNING", "minBalanceNotification");
                } else {
                    formContext.ui.clearFormNotification("minBalanceNotification");
                }
            } else { 
                // Add to Cert case
                var newBalCheck = certificateBalanceAmount + amount;
                
                if (newBalCheck > totalAmount || newBalCheck < minBalance) {
                    showFormNotification(formContext, CONSTANTS.MESSAGES.MINIMUM_FUNDS_WARNING, "WARNING", "minBalanceNotification");
                } else {
                    formContext.ui.clearFormNotification("minBalanceNotification");
                }
            }
        }
    }
}
